"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var path = require("path");
var fs = require("fs");
var global_1 = require("./global");
var Color = require('color');
var Themebar = /** @class */ (function () {
    function Themebar() {
    }
    /**
     * get an `HTMLStyleElement` with the style of the **windows** type buttons
     */
    Themebar.win = function () {
        return global_1.$('style', {}, fs.readFileSync(path.resolve(this.baseUrl, 'win.css'), 'utf8'));
    };
    /**
     * get an `HTMLStyleElement` with the style of the **mac** type buttons
     */
    Themebar.mac = function () {
        return global_1.$('style', {}, fs.readFileSync(path.resolve(this.baseUrl, 'mac.css'), 'utf8'));
    };
    Themebar.setColors = function (color) {
        var _this = this;
        var styleElement = document.getElementById('titlebar-style-icons');
        var style;
        if (!styleElement) {
            style = global_1.$('style#titlebar-style-icons');
        }
        else {
            style = styleElement;
        }
        style.textContent = ".titlebar > .window-controls-container .window-icon {\n      background-color: " + this.contentColor(color) + ";\n    }\n    \n    .menu-container .menu-item-check, .menu-container .submenu-indicator {\n      background-color: " + this.contentColor(color) + ";\n    }";
        if (!styleElement)
            document.head.appendChild(style);
        document.querySelectorAll('.menubar-menu-items-holder').forEach(function (menu) {
            menu.style.backgroundColor = color !== 'transparent' ? Color(color).darken(0.12) : '#EDEDED';
            menu.style.color = _this.contentColor(color);
        });
    };
    Themebar.contentColor = function (color) {
        return Color(color).isDark() && color !== 'transparent' ? '#ffffff' : '#333333';
    };
    Themebar.baseUrl = path.resolve(path.dirname(require.resolve('./index')), 'assets/themes');
    return Themebar;
}());
exports.Themebar = Themebar;
